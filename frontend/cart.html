<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cart - Pharmida Healthcare</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="main-navbar" style="width:100vw;background:#17613e;padding:0.5em 0;">
        <ul style="display:flex;justify-content:center;align-items:center;gap:32px;list-style:none;margin:0;padding:0;">
            <li><a href="index.html" style="color:#fff;font-weight:600;text-decoration:none;">Home</a></li>
            <li><a href="cart.html" style="color:#fff;font-weight:600;text-decoration:none;">Cart</a></li>
            <li><a href="profile.html" style="color:#fff;font-weight:600;text-decoration:none;">Profile</a></li>
            <li><a href="upload-prescription.html" style="color:#fff;font-weight:600;text-decoration:none;">Upload Prescription</a></li>
            <li><a href="scan-prescription.html" style="color:#fff;font-weight:600;text-decoration:none;">Scan Prescription</a></li>
            <li><a href="call-ambulance.html" style="color:#fff;font-weight:600;text-decoration:none;">Call Ambulance</a></li>
            <li><a href="doctor-on-call.html" style="color:#fff;font-weight:600;text-decoration:none;">Doctor on Call</a></li>
            <li><a href="product-upload.html" style="color:#fff;font-weight:600;text-decoration:none;">Product Upload</a></li>
            <li><a href="checkout.html" style="color:#fff;font-weight:600;text-decoration:none;">Checkout</a></li>
        </ul>
    </nav>
    <main>
        <h2>Your Cart</h2>
        <div id="cartItems">
            <p>No items in cart.</p>
        </div>
        <div style="margin-top:18px;">
            <button id="clearCart">Clear Cart</button>
            <a href="checkout.html" style="margin-left:12px;"><button id="checkoutBtn">Proceed to Checkout</button></a>
        </div>
        <script>
            function getCart() {
                return JSON.parse(localStorage.getItem('pharm_cart') || '[]');
            }
            function saveCart(c) { localStorage.setItem('pharm_cart', JSON.stringify(c)); }
            function renderCart() {
                const items = getCart();
                const root = document.getElementById('cartItems');
                if (!items.length) { root.innerHTML = '<p>No items in cart.</p>'; return; }
                root.innerHTML = '';
                let total = 0;
                items.forEach((it, idx) => {
                    total += Number(it.price || 0);
                    const div = document.createElement('div');
                    div.style.display='flex'; div.style.justifyContent='space-between'; div.style.alignItems='center'; div.style.padding='8px 0';
                    div.innerHTML = `<div style="display:flex;gap:12px;align-items:center;"><img src="${it.image || ''}" style="width:64px;height:64px;object-fit:contain;border-radius:6px;"/><div><strong>${it.name}</strong><div>₹${Number(it.price).toFixed(2)}</div></div></div><div><button data-idx="${idx}" class="rm">Remove</button></div>`;
                    root.appendChild(div);
                });
                const totalDiv = document.createElement('div');
                totalDiv.style.marginTop='12px';
                totalDiv.innerHTML = `<strong>Total: ₹${total.toFixed(2)}</strong>`;
                root.appendChild(totalDiv);
                root.querySelectorAll('.rm').forEach(b => b.addEventListener('click', (e) => { const i = Number(e.target.dataset.idx); const c = getCart(); c.splice(i,1); saveCart(c); renderCart(); }));
            }
            document.getElementById('clearCart').addEventListener('click', () => { localStorage.removeItem('pharm_cart'); renderCart(); });
            renderCart();
        </script>
        
    </main>
</body>
</html>